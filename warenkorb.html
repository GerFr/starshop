<!doctype html>
<html lang="en">

<head>
    <title>Warenkorb</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Bootstrap CSS v5.2.1 -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <!-- icons -->
    <link rel="icon" href="assets/icons/cart.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <script src="js/handlebars.min-v4.7.8.js"></script>
    <script src="js/vanilla.js"></script>

    <script>
        function init() {
            render({}, '[type="text/x-handlebars-navbar"]')
            render({}, '[type="text/x-handlebars-footer"]')
        }
        const cartIDdata = JSON.parse(sessionStorage.getItem("cart"))
        const baseData =JSON.parse(localStorage.getItem("data"))
        //console.log(baseData[0].StarID)

        const cartData = []

        if ((!(cartIDdata===null)) && (!(baseData===null))){
            console.log(typeof cartIDdata[0])
            for (var j = 0; j < cartIDdata.length; j++){
	            for (var i = 0; i < baseData.length; i++){
		            if (baseData[i].StarID == (Number(cartIDdata[j]))){
			            cartData.push(baseData[i])
		            }
                }
	        }
        }
        console.log(typeof cartData)
        if (cartData>0){
        render(cartData,  '[type="text/x-handlebars-template"]')
        }
    </script>

</head>   
<body onload="init()">

    <script id="template" type="text/x-handlebars-navbar">
        {{> navbar }}
    </script>
    <div></div>
   

    <main>
        <div class="col-md-4 order-md-2 mb-4">
            <h4 class="d-flex justify-content-between align-items-center mb-3">
              <span class="text-muted">Your cart</span>
            </h4>
            <script id="template" type="text/x-handlebars-template">
                    {{#each this}}
                    <li class="list-group-item d-flex justify-content-between lh-condensed">
                        <div>
                            <h6 class="my-0 text-start">{{ProperName}}</h6>
                            <small class="text-muted">
                                {{#if (lt Price 100000)}}
                                <strong>Sale</strong>
                                {{/if}}
                                Distance: {{Distance}}
                            </small>
                          </div>
                        <span class="text-muted">â‚¬{{Price}}</span>
                    </li>
                    {{/each}}
                    </script>
    
            <a name="checkout" id="" class="btn btn-primary" href="checkout.html" role="button">Checkout</a>
            <div class="ibox">
                <div class="ibox-content">
                    <p class="font-bold">
                        Other products you may be interested
                    </p>
                    <hr>
                    <div>
                        <a href="index.html#495-card" class="product-name"> Product 1</a>
                        <div class="small m-t-xs">
                            Star "n"
                        </div>
                        <div class="m-t text-righ">

                            <a class="btn btn-xs btn-outline btn-primary">Info <i class="fa fa-long-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                    <hr>
                    <div>
                        <a href="#" class="product-name"> Product 2</a>
                        <div class="small m-t-xs">
                            Star "m"
                        </div>
                        <div class="m-t text-righ">

                            <a href="#" class="btn btn-xs btn-outline btn-primary">Info <i
                                    class="fa fa-long-arrow-right"></i> </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script id="template" type="text/x-handlebars-footer">{{>footer
    }}</script>
  <div></div>   
    <!-- Bootstrap JavaScript Libraries -->
    <script src="js/bootstrap.js"></script>
</body>

</html>