<!doctype html>
<html lang="en">

<head>
  <title>Starshop</title>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <!-- bootstrap -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <!-- source: https://cdn.jsdelivr.net/npm/bootstrap-dark-5@1.1.3/dist/css/bootstrap-dark.min.css -->
  <!-- icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="icon" href="assets/icons/stars.png">
  <!-- handlebars -->
  <script src="js/handlebars.min-v4.7.8.js"></script>
  <script src="js/vanilla.js"></script>

  <script>
    function init() {
      if (localStorage.getItem("data") === null) {
        fetch('data/hygfull.json')
          .then(response => response.json())
          .then(data => {
            localStorage.setItem("data", JSON.stringify(data))
            location.reload()
          })
          .catch(error => console.error('Error fetching JSON file:', error));
      } else {
        const data = JSON.parse(localStorage.getItem("data"))
        render(data, '[type="text/x-handlebars-template"]')
      }
    }

  </script>
</head>

<body onload="init()">


  <!-- Handlebar helpers  -->
  <script>
    Handlebars.registerHelper({
      eq: (v1, v2) => v1 === v2,
      ne: (v1, v2) => v1 !== v2,
      lt: (v1, v2) => v1 < v2,
      gt: (v1, v2) => v1 > v2,
      lte: (v1, v2) => v1 <= v2,
      gte: (v1, v2) => v1 >= v2,
      and() {
        return Array.prototype.every.call(arguments, Boolean);
      },
      or() {
        return Array.prototype.slice.call(arguments, 0, -1).some(Boolean);
      }
    });
  </script>


  <div>
    <script id="replace_with_navbar" src="js/navbar.js"></script>
  </div>

  <!-- MARK:image and intro
    -->
  <section id="intro">
    <div class="container-lg my-5">
      <div class="row justify-contents-center align-items-center">
        <div class="col-md-5 text-center text-md-start">
          <h1>
            <div class="display-2">Buy a Star</div>
            <div class="display-5 text-muted">Leave a Lasting Legacy</div>
          </h1>
          <p class="lead my-4 text-muted">Choose Any Star Visible in the Sky from the Famous <a
              href="https://github.com/astronexus/HYG-Database/blob/main/hyg/v2/hygfull.csv"><strong>HYG</strong></a>
            Database - A Truly
            Unique Gift for
            the Rich and Successful</p>
          <a href="#pricing" class="btn btn-secondary btn-lg">Buy Now</a>
        </div>
        <div class="col-md-5 text-center d-none d-md-block">
          <img src="assets/StarField.jpg" alt="star image" class="img-fluid rounded">
        </div>
      </div>

    </div>
  </section>

  <!-- MARK: Articles 
  -->
  <section id="pricing" class="bg-black mt-5">

    <div class="container-l py-4">
      <div class="text-center">
        <h2>Star Collection</h2>
        <p class="lead text-muted">choose the perfect star</p>
      </div>

      <nav class="navbar bg-body-tertiary sticky-top bg-black">
        <div class="container-fluid">
          <a class="navbar-brand"></a>
          <form class="d-flex" role="search">
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-white btn-secondary" type="submit">Search</button>
            <button class="btn mx-2 btn-primary" type="submit">Cart</button>
          </form>
        </div>
      </nav>

      <script id="template" type="text/x-handlebars-template">
        {{#each this}}
        <div class="col-8 col-sm-6 col-md-4 col-xl-3" id="{{StarID}}-card">
          <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#{{StarID}}-modal">
            <div class="card border-1">
              <img src="assets/stars/{{Color}}.png" class="card-img-top img-fluid"  >
              {{#if (lt Price 100000)}}
                <div class="badge position-absolute rounded-pill bg-danger text-white p-2 m-2">Sale</div>
              {{/if}} 
              <div class="card-body text-center py-4">
                <h4 class="card-title">
                  {{ProperName}}
                </h4>
                <p class="lead card-subtitle">
                  distance:<br />
                    <strong>{{Distance}}</strong><br />
                    magnitude:<br />
                    <strong>{{AbsMag}}</strong><br />
                </p>
              </div>
            </div>
        </div>
        {{/each}}
      </script>
      <div class="row mx-sm-5 align-items-center justify-content-center g-2">
      </div>
    </div>
  </section>


  <!-- MARK: modal
   -->
  <script id="template" type="text/x-handlebars-template">
    {{#each this}}
  <div class="modal fade" id="{{StarID}}-modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5">{{ProperName}}</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="text-center"><img src="assets/stars/{{Color}}.png" class="card-img-top align-center" >
          </div>
          <div class="accordion" id="{{StarID}}-accordion">
            <div class="accordion-item">
              <h2 class="accordion-header" id="{{StarID}}-heading">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#{{StarID}}-collapseOne"
                  aria-expanded="true" aria-controls="{{StarID}}-collapseOne">
                  General Information
                </button>
              </h2>
              <div id="{{StarID}}-collapseOne" class="accordion-collapse collapse show" aria-labelledby="{{StarID}}-heading"
                data-bs-parent="#{{StarID}}-accordion">
                <div class="accordion-body">
                  <p>
                    {{GeneralInformation}}
                  </p>
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header" id="{{StarID}}-headingTwo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                  data-bs-target="#{{StarID}}-collapseTwo" aria-expanded="false" aria-controls="{{StarID}}-collapseTwo">
                  Stats
                </button>
              </h2>
              <div id="{{StarID}}-collapseTwo" class="accordion-collapse collapse" aria-labelledby="{{StarID}}-headingTwo"
                data-bs-parent="#{{StarID}}-accordion">
                <div class="accordion-body">
                  <table class="table">
                    <thead>
                      <tr>
                        <th scope="col"></th>
                        <th scope="col">Value</th>
                        <th scope="col">Description</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Id</td>
                        <td>{{StarID}}</td>
                        <td>ID of the Star</td>
                      </tr>
                      <tr>
                        <td>Hip</td>
                        <td>{{Hip}}</td>
                        <td>ID in the Hipparcos catalog</td>
                      </tr>
                      <tr>
                        <td>HD</td>
                        <td>{{HD}}</td>
                        <td>ID in the Henry Draper catalog</td>
                      </tr>
                      <tr>
                        <td>RA</td>
                        <td> {{RA}}</td>
                        <td>right ascension, for epoch and equinox 2000.0.</td>
                      </tr>
                      <tr>
                        <td>Dec</td>
                        <td>{{Dec}}</td>
                        <td>declination, for epoch and equinox 2000.0.</td>
                      </tr>
                      <tr>
                        <td>Distance</td>
                        <td>{{Distance}}</td>
                        <td>distance in parsecs</td>
                        <!-- To convert parsecs to light years, multiply by 3.262. A value >= 100000 indicates missing or dubious (e.g., negative) parallax data in Hipparcos. -->
                      </tr>
                      <tr>
                        <td>Mag</td>
                        <td>{{Mag}}</td>
                        <td>apparent visual magnitude</td>
                      </tr>
                      <tr>
                        <td>Abs Mag</td>
                        <td>{{AbsMag}}</td>
                        <td>absolute visual magnitude</td>
                        <!-- its apparent magnitude from a distance of 10 parsecs -->
                      </tr>
                      <tr>
                        <td>Spectrum</td>
                        <td>{{Spectrum}}</td>
                        <td>spectral type</td>
                      </tr>
                      <tr>
                        <td>Color Index</td>
                        <td>{{ColorIndex}}</td>
                        <td>color index (blue magnitude - visual magnitude)</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header" id="{{StarID}}-headingThree">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                  data-bs-target="#{{StarID}}-collapseThree" aria-expanded="false" aria-controls="{{StarID}}-collapseThree">
                  Pricing
                </button>
              </h2>
              <div id="{{StarID}}-collapseThree" class="accordion-collapse collapse" aria-labelledby="{{StarID}}-headingThree"
                data-bs-parent="#{{StarID}}-accordion">
                <div class="accordion-body">
                  € {{Price}}
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button onclick="tocart({{StarID}})" id="cart" class="btn btn-primary">Add to Cart</button>
        </div>
      </div>
    </div>
  </div>
  {{/each}}
  </script>
  <div></div>

  <script>
    CART = "cart"
    function tocart(sID) {
      var cartarr = sessionStorage.getItem(CART)
      if (cartarr === null) {
        cartarr = [sID]
        sessionStorage.setItem(CART, JSON.stringify(cartarr))
      }
      else if (JSON.parse(cartarr).includes(sID) === false) {
        cartarr = JSON.parse(cartarr)
        cartarr.push(sID);
        sessionStorage.setItem(CART, JSON.stringify(cartarr))
      }
    }
  </script>

  <div>
    <script id="replace_with_footer" src="js/footer.js"></script>
  </div>

  <!-- Bootstrap JavaScript Libraries -->
  <script src="js/bootstrap.js"></script>

</body>

</html>